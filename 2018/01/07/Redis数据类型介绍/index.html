<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Redis数据类型介绍 | CrazyIT</title>
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url(/assets/header.png)">
        <div class='av-pic' style="background-image: url(/assets/tree_small.png)">
        </div>
    </section>
    <section class='menu'>
        <div>CrazyIT</div>
        
            <div>Toss more than life</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
            <a href="/tags/" class="Btn">
              <li>Tags</li>
            </a>  
          
            <a href="/categories/" class="Btn">
              <li>Categories</li>
            </a>  
          
            <a href="/about/" class="Btn">
              <li>About</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
            
                <a href="https://github.com/dicheng52119">
                    <img src="/assets/github.svg" />
                </a>
            
        
            
                <a href="https://www.facebook.com/profile.php?id=100023446571362">
                    <img src="/assets/facebook.svg" />
                </a>
            
        
            
                <a href="https://www.zhihu.com/people/yixie-zhi-qiu-16-96-61/activities">
                    <img src="/assets/zhihu.svg" />
                </a>
            
        
            
                <a href="https://www.csdn.net/">
                    <img src="/assets/csdn.svg" />
                </a>
            
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class='ContentView'>
    <header class='PageTitle'>
        <h1>Redis数据类型介绍</h1>
    </header>

    <section>
      <h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>redis常用五种数据类型:string,hash,list,set,zset(sorted set).</p>
<h3 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h3><p>String是最简单的类型，一个key对应一个value。</p>
<p>String类型的数据最大1G。 </p>
<p>String类型的值可以被视作integer，从而可以让“INCR”命令族操作(incrby、decr、decrby),这种情况下，该integer的值限制在64位有符号数。 </p>
<p>在list、set和zset中包含的独立的元素类型都是Redis String类型。</p>
<h3 id="List类型"><a href="#List类型" class="headerlink" title="List类型"></a>List类型</h3><p>链表类型，主要功能是push、pop、获取一个范围的所有值等。其中的key可以理解为链表的名字。</p>
<p>在Redis中，list就是Redis String的列表，按照插入顺序排序。比如使用LPUSH命令在list头插入一个元素，使用RPUSH命令在list的尾插入一个元素。当这两个命令之一作用于一个空的key时，一个新的list就创建出来了。</p>
<p>List的最大长度是2^32-1个元素。</p>
<a id="more"></a>
<h3 id="Set类型"><a href="#Set类型" class="headerlink" title="Set类型"></a>Set类型</h3><p>集合，和数学中的集合概念相似。操作中的key理解为集合的名字。</p>
<p>在Redis中，set就是Redis String的无序集合，不允许有重复元素。</p>
<p>Set的最大元素数是2^32-1。</p>
<p>Redis中对set的操作还有交集、并集、差集等。</p>
<h3 id="ZSet-Sorted-Set-类型"><a href="#ZSet-Sorted-Set-类型" class="headerlink" title="ZSet(Sorted Set)类型"></a>ZSet(Sorted Set)类型</h3><p>Zset是set的一个升级版本，在set的基础上增加了一个顺序属性，这一属性在添加修改元素时可以指定，每次指定后zset会自动安装指定值重新调整顺序。可以理解为一张表，一列存value，一列存顺序。操作中的key理解为zset的名字。</p>
<p>Zset的最大元素数是2^32-1。</p>
<p>对于已经有序的zset，仍然可以使用SORT命令，通过指定ASC|DESC参数对其进行排序。</p>
<h3 id="hash类型"><a href="#hash类型" class="headerlink" title="hash类型"></a>hash类型</h3><p>hash是最接近关系数据库结构的数据类型，可以将数据库一条记录或程序中一个对象转换成hashmap存放在redis中。</p>
<h3 id="jedis操作命令："><a href="#jedis操作命令：" class="headerlink" title="jedis操作命令："></a>jedis操作命令：</h3><ul>
<li><p>对value操作的命令</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">exists(key)：确认一个key是否存在</span><br><span class="line"></span><br><span class="line">del(key)：删除一个key</span><br><span class="line"></span><br><span class="line">type(key)：返回值的类型</span><br><span class="line"></span><br><span class="line">keys(pattern)：返回满足给定pattern的所有key</span><br><span class="line"></span><br><span class="line">randomkey：随机返回key空间的一个key</span><br><span class="line"></span><br><span class="line">rename(oldname, newname)：将key由oldname重命名为newname，若newname存在则删除newname表示的key</span><br><span class="line"></span><br><span class="line">dbsize：返回当前数据库中key的数目</span><br><span class="line"></span><br><span class="line">expire：设定一个key的活动时间（s）</span><br><span class="line"></span><br><span class="line">ttl：获得一个key的活动时间</span><br><span class="line"></span><br><span class="line">select(index)：按索引查询</span><br><span class="line"></span><br><span class="line">move(key, dbindex)：将当前数据库中的key转移到有dbindex索引的数据库</span><br><span class="line"></span><br><span class="line">flushdb：删除当前选择数据库中的所有key</span><br><span class="line"></span><br><span class="line">flushall：删除所有数据库中的所有key</span><br></pre></td></tr></table></figure>
</li>
<li><p>对String操作的命令</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">set(key, value)：给数据库中名称为key的string赋予值value</span><br><span class="line"></span><br><span class="line">get(key)：返回数据库中名称为key的string的value</span><br><span class="line"></span><br><span class="line">getset(key, value)：给名称为key的string赋予上一次的value</span><br><span class="line"></span><br><span class="line">mget(key1, key2,…, key N)：返回库中多个string（它们的名称为key1，key2…）的value     s</span><br><span class="line"></span><br><span class="line">setnx(key, value)：如果不存在名称为key的string，则向库中添加string，名称为key，值为value</span><br><span class="line"></span><br><span class="line">setex(key, time, value)：向库中添加string（名称为key，值为value）同时，设定过期时间time</span><br><span class="line"></span><br><span class="line">mset(key1, value1, key2, value2,…key N, value N)：同时给多个string赋值，名称为key i的string赋值value i</span><br><span class="line"></span><br><span class="line">msetnx(key1, value1, key2, value2,…key N, value N)：如果所有名称为key i的string都不存在，则向库中添加string，名称           key i赋值为value i</span><br><span class="line"></span><br><span class="line">incr(key)：名称为key的string增<span class="number">1</span>操作</span><br><span class="line"></span><br><span class="line">incrby(key, integer)：名称为key的string增加integer</span><br><span class="line"></span><br><span class="line">decr(key)：名称为key的string减<span class="number">1</span>操作</span><br><span class="line"></span><br><span class="line">decrby(key, integer)：名称为key的string减少integer</span><br><span class="line"></span><br><span class="line">append(key, value)：名称为key的string的值附加value</span><br><span class="line"></span><br><span class="line">substr(key, start, end)：返回名称为key的string的value的子串</span><br></pre></td></tr></table></figure>
</li>
<li><p>对List操作的命令</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">rpush(key, value)：在名称为key的list尾添加一个值为value的元素  </span><br><span class="line"></span><br><span class="line">lpush(key, value)：在名称为key的list头添加一个值为value的 元素</span><br><span class="line"></span><br><span class="line">llen(key)：返回名称为key的list的长度</span><br><span class="line"></span><br><span class="line">lrange(key, start, end)：返回名称为key的list中start至end之间的元素（下标从<span class="number">0</span>开始，下同）</span><br><span class="line"></span><br><span class="line">ltrim(key, start, end)：截取名称为key的list，保留start至end之间的元素</span><br><span class="line"></span><br><span class="line">lindex(key, index)：返回名称为key的list中index位置的元素</span><br><span class="line"></span><br><span class="line">lset(key, index, value)：给名称为key的list中index位置的元素赋值为value</span><br><span class="line"></span><br><span class="line">lrem(key, count, value)：删除count个名称为key的list中值为value的元素。count为<span class="number">0</span>，删除所有值为value的元素，count&gt;<span class="number">0</span>      从头至尾删除count个值为value的元素，count&lt;<span class="number">0</span>从尾到头删除|count|个值为value的元素。</span><br><span class="line"></span><br><span class="line">lpop(key)：返回并删除名称为key的list中的首元素</span><br><span class="line"></span><br><span class="line">rpop(key)：返回并删除名称为key的list中的尾元素</span><br><span class="line"></span><br><span class="line">blpop(key1, key2,… key N, timeout)：lpop 命令的block版本。即当timeout为<span class="number">0</span>时，若遇到名称为key i的list不存在或该list为空，则命令结束。如果 timeout&gt;<span class="number">0</span>，则遇到上述情况时，等待timeout秒，如果问题没有解决，则对key i+<span class="number">1</span>开始的list执行pop操作。</span><br><span class="line"></span><br><span class="line">brpop(key1, key2,… key N, timeout)：rpop的block版本。参考上一命令。</span><br><span class="line"></span><br><span class="line">rpoplpush(srckey, dstkey)：返回并删除名称为srckey的list的尾元素，并将该元素添加到名称为dstkey的list的头部</span><br></pre></td></tr></table></figure>
</li>
<li><p>对Set操作的命令</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">sadd(key, member)：向名称为key的set中添加元素member</span><br><span class="line"></span><br><span class="line">srem(key, member) ：删除名称为key的set中的元素member</span><br><span class="line"></span><br><span class="line">spop(key) ：随机返回并删除名称为key的set中一个元素  </span><br><span class="line"></span><br><span class="line">smove(srckey, dstkey, member) ：将member元素从名称为srckey的集合移到名称为dstkey的集合</span><br><span class="line"></span><br><span class="line">scard(key) ：返回名称为key的set的基数        </span><br><span class="line"></span><br><span class="line">sismember(key, member) ：测试member是否是名称为key的set的元素</span><br><span class="line"></span><br><span class="line">sinter(key1, key2,…key N) ：求交集</span><br><span class="line"></span><br><span class="line">sinterstore(dstkey, key1, key2,…key N) ：求交集并将交集保存到dstkey的集合</span><br><span class="line"></span><br><span class="line">sunion(key1, key2,…key N) ：求并集</span><br><span class="line"></span><br><span class="line">sunionstore(dstkey, key1, key2,…key N) ：求并集并将并集保存到dstkey的集合</span><br><span class="line"></span><br><span class="line">sdiff(key1, key2,…key N) ：求差集</span><br><span class="line"></span><br><span class="line">sdiffstore(dstkey, key1, key2,…key N) ：求差集并将差集保存到dstkey的集合</span><br><span class="line"></span><br><span class="line">smembers(key) ：返回名称为key的set的所有元素</span><br><span class="line"></span><br><span class="line">srandmember(key) ：随机返回名称为key的set的一个元素</span><br></pre></td></tr></table></figure>
</li>
<li><p>对zset（sorted set）操作的命令</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">zadd(key, score, member)：向名称为key的zset中添加元素member，score用于排序。如果该元素已经存在，则根据score更新该元素的顺序。</span><br><span class="line"></span><br><span class="line">zrem(key, member) ：删除名称为key的zset中的元素member</span><br><span class="line"></span><br><span class="line">zincrby(key, increment, member) ：如果在名称为key的zset中已经存在元素member，则该元素的score增加increment；否则向集合中添加该元素，其score的值为increment</span><br><span class="line"></span><br><span class="line">zrank(key, member) ：返回名称为key的zset（元素已按score从小到大排序）中member元素的rank（即index，从<span class="number">0</span>开始），若没有member元素，返回“nil”</span><br><span class="line"></span><br><span class="line">zrevrank(key, member) ：返回名称为key的zset（元素已按score从大到小排序）中member元素的rank（即index，从<span class="number">0</span>开始），若没有member元素，返回“nil”</span><br><span class="line"></span><br><span class="line">zrange(key, start, end)：返回名称为key的zset（元素已按score从小到大排序）中的index从start到end的所有元素</span><br><span class="line"></span><br><span class="line">zrevrange(key, start, end)：返回名称为key的zset（元素已按score从大到小排序）中的index从start到end的所有元素</span><br><span class="line"></span><br><span class="line">zrangebyscore(key, min, max)：返回名称为key的zset中score &gt;= min且score &lt;= max的所有元素</span><br><span class="line"></span><br><span class="line">zcard(key)：返回名称为key的zset的基数</span><br><span class="line"></span><br><span class="line">zscore(key, element)：返回名称为key的zset中元素element的score</span><br><span class="line"></span><br><span class="line">zremrangebyrank(key, min, max)：删除名称为key的zset中rank &gt;= min且rank &lt;= max的所有元素</span><br><span class="line"></span><br><span class="line">zremrangebyscore(key, min, max) ：删除名称为key的zset中score &gt;= min且score &lt;= max的所有元素</span><br><span class="line"></span><br><span class="line">zunionstore / zinterstore(dstkeyN, key1,…,keyN, WEIGHTS w1,…wN, AGGREGATE SUM|MIN|MAX)：对N个zset求并集和交集，并将最后的集合保存在dstkeyN中。对于集合中每一个元素的score，在进行AGGREGATE运算前，都要乘以对于的WEIGHT参数。如果没有提供WEIGHT，默认为<span class="number">1</span>。默认的AGGREGATE是SUM，即结果集合中元素的score是所有集合对应元素进行 SUM运算的值，而MIN和MAX是指，结果集合中元素的score是所有集合对应元素中最小值和最大值。</span><br></pre></td></tr></table></figure>
</li>
<li><p>对Hash操作的命令</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">hset(key, field, value)：向名称为key的hash中添加元素field&lt;—&gt;value</span><br><span class="line"></span><br><span class="line">hget(key, field)：返回名称为key的hash中field对应的value</span><br><span class="line"></span><br><span class="line">hmget(key, field1, …,field N)：返回名称为key的hash中field i对应的value</span><br><span class="line"></span><br><span class="line">hmset(key, field1, value1,…,field N, value N)：向名称为key的hash中添加元素field i&lt;—&gt;value i</span><br><span class="line"></span><br><span class="line">hincrby(key, field, integer)：将名称为key的hash中field的value增加integer</span><br><span class="line"></span><br><span class="line">hexists(key, field)：名称为key的hash中是否存在键为field的域</span><br><span class="line"></span><br><span class="line">hdel(key, field)：删除名称为key的hash中键为field的域</span><br><span class="line"></span><br><span class="line">hlen(key)：返回名称为key的hash中元素个数</span><br><span class="line"></span><br><span class="line">hkeys(key)：返回名称为key的hash中所有键</span><br><span class="line"></span><br><span class="line">hvals(key)：返回名称为key的hash中所有键对应的value</span><br><span class="line"></span><br><span class="line">hgetall(key)：返回名称为key的hash中所有的键（field）及其对应的value</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="各种数据类型所对应的应用场景"><a href="#各种数据类型所对应的应用场景" class="headerlink" title="各种数据类型所对应的应用场景"></a>各种数据类型所对应的应用场景</h3><ul>
<li><p><strong>String类型的应用场景</strong></p>
<p>String是最常用的一种数据类型,普通的key/value存储.</p>
</li>
<li><p><strong>list类型的应用场景</strong></p>
<p>比较适用于列表式存储且顺序相对比较固定，例如：</p>
<p>省份、城市列表</p>
<p>品牌、厂商、车系、车型等列表</p>
<p>拆车坊专题列表…</p>
</li>
<li><p><strong>set类型的应用场景</strong></p>
<p>Set对外提供的功能与list类似,当需要存储一个列表数据,又不希望出现重复数据时,可选用set</p>
</li>
<li><p><strong>zset(sorted set)类型的应用场景</strong></p>
<p>zset的使用场景与set类似,区别是set不是自动有序的,而zset可以通过用户额外提供一个优先级(score)的参数来为成员排序,并且是插入有序的,即自动排序.当你需要一个有序的并且不重复的集合列表,那么可以选择zset数据结构。例如:</p>
<p>根据PV排序的热门车系车型列表</p>
<p>根据时间排序的新闻列表</p>
</li>
<li><p><strong>hash类型的应用场景</strong></p>
<p>类似于表记录的存储</p>
<p>页面视图所需数据的存储</p>
</li>
</ul>


      

    </section>
    
      <section class='ArticleMeta'>
          <div>
            发布于&nbsp;
            <time datetime="2018-01-07T13:29:32.000Z" itemprop="datePublished">
              2018-01-07
            </time>
          </div>
          
            <div>
              tags: 
  <li class="meta-text">
  { <a href="/tags/technology/">technology</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/redis-type/">redis type</a> }
  </li>


            </div>
          
      </section>
    
    
</article>

  
</div>

            <footer>
    <div>© 2015 - Mr.CrazyDC </div>
    <div>
    Powered by Hexo
    </div>
</footer>

        </div>
    </div>
</div>
<script src="/js/pager/dist/singlepager.js"></script>
<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>